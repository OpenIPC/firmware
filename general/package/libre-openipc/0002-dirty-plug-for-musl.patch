--- a/src/dns/res.c.orig	2022-03-12 09:42:35.000000000 +0300
+++ b/src/dns/res.c	2023-05-15 01:02:30.147277596 +0300
@@ -31,7 +31,7 @@
 	state = _res;
 #else
 	memset(&state, 0, sizeof(state));
-	ret = res_ninit(&state);
+	ret = res_init();
 #endif
 	if (0 != ret)
 		return ENOENT;
@@ -78,7 +78,7 @@
  out:
 #ifdef OPENBSD
 #else
-	res_nclose(&state);
+	pclose(&state);
 #endif
 
 	return err;
